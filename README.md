# ğŸ± OIIAIOIIIAI â€” é­”æ€§å‘å£°éŸ³æ¸¸

> å¯¹ç€éº¦å…‹é£å‘å‡º "oiiaioiiiai"ï¼Œè®©çŒ«å’ªç–¯ç‹‚æ—‹è½¬ï¼

ä¸€ä¸ªåŸºäºå®æ—¶å…ƒéŸ³è¯†åˆ«çš„æµè§ˆå™¨éŸ³æ¸¸ã€‚ç©å®¶å¯¹ç€éº¦å…‹é£è¿ç»­å‘å‡º O / I / A å…ƒéŸ³ï¼Œé©±åŠ¨çŒ«å’ªæ—‹è½¬å¹¶è§¦å‘äº”é˜¶æ®µè§†è§‰è¿›åŒ–ã€‚çµæ„Ÿæ¥è‡ªé‚£åªä¸€è¾¹æ—‹è½¬ä¸€è¾¹å‘å‡ºé­”æ€§å£°éŸ³çš„çŒ« ğŸ±ğŸ”„

**[â–¶ï¸ åœ¨çº¿è¯•ç©](https://laurence-042.github.io/project/oral-oiiaioiiiai/demo/)** ï½œ [è®¾è®¡æ–‡æ¡£](story.md) ï½œ [ML æ£€æµ‹å™¨æ–‡æ¡£](src/composables/VOWEL_DETECTOR_ML.md)

oiia ç´ ææ¥æºï¼šhttps://www.bilibili.com/video/BV1AvLizFEPn/

## ç‰¹æ€§

- ğŸ¤ **å®æ—¶å…ƒéŸ³è¯†åˆ«** â€” TensorFlow.js CNN æ¨¡å‹ï¼Œæµè§ˆå™¨ç«¯æ¨ç†
- ğŸ¯ **åºåˆ—æ ¡éªŒ** â€” æ£€æµ‹ Oâ†’Iâ†’Iâ†’Aâ†’Iâ†’Oâ†’Iâ†’Iâ†’Iâ†’Aâ†’I å¾ªç¯ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é… (Uâ†”O, Iâ†”E)
- ğŸ”¥ **äº”é˜¶æ®µè§†è§‰è¿›åŒ–** â€” ä»ç¼“æ…¢æ—‹è½¬åˆ°å…¨å±å½©è™¹æ¼©æ¶¡ï¼Œç²’å­ / è‰²å·® / æ®‹å½± / å±å¹•æŠ–åŠ¨
- ğŸµ **ç¨‹åºåŒ– BGM** â€” Tone.js 8 è½¨é“é€é˜¶æ®µå åŠ ï¼ŒBPM è·Ÿéšå‘éŸ³é€Ÿåº¦
- ğŸ“¸ **åˆ†äº«ç³»ç»Ÿ** â€” ç»“ç®—å¡ç‰‡ + é«˜å…‰æ—¶åˆ» + QR ç ï¼Œæ‰‡å½¢å¡ç‰‡è½®æ’­
- ğŸ† **å…¨ç½‘æ’è¡Œæ¦œ** â€” Cloudflare Workers KV åç«¯
- ğŸ“¦ **èµ„æºåŒ…ç³»ç»Ÿ** â€” å¯æ›¿æ¢çŒ«å’ªå¸§åŠ¨ç”»ã€éŸ³èŠ‚éŸ³æ•ˆã€é˜¶æ®µæ–‡æ¡ˆ

## å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (https://localhost:3000)
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# ä»…ç±»å‹æ£€æŸ¥
npx tsc --noEmit
```

> âš ï¸ éº¦å…‹é£ API éœ€è¦ HTTPS æˆ– localhostã€‚å¼€å‘æœåŠ¡å™¨å·²é…ç½®è‡ªç­¾å SSLã€‚

## æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| å‰ç«¯æ¡†æ¶ | Vue 3 + TypeScript (Composition API) |
| æ„å»ºå·¥å…· | Vite 5 |
| å…ƒéŸ³è¯†åˆ« | TensorFlow.js CNN (uint8 é‡åŒ–, 106KB) |
| éŸ³é¢‘å¤„ç† | Web Audio API (ScriptProcessorNode, 16kHz é‡é‡‡æ ·) |
| åŠ¨æ€éŸ³ä¹ | Tone.js ç¨‹åºåŒ–åˆæˆ |
| è§†è§‰ç‰¹æ•ˆ | CSS + Canvas 2D ç²’å­ç³»ç»Ÿ |
| æ’è¡Œæ¦œåç«¯ | Cloudflare Workers + KV |
| åˆ†äº«å›¾ç”Ÿæˆ | Canvas 2D + qrcode åº“ |

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ composables/                   # ä¸šåŠ¡é€»è¾‘ (Vue 3 Composition API)
â”‚   â”œâ”€â”€ useVowelDetectorML.ts      # â­ CNN å…ƒéŸ³æ£€æµ‹å™¨
â”‚   â”œâ”€â”€ useVowelDetector.ts        # FFT å…±æŒ¯å³°åå¤‡æ£€æµ‹å™¨
â”‚   â”œâ”€â”€ useGameState.ts            # æ¸¸æˆçŠ¶æ€æœºï¼ˆè®¡åˆ†/è¿å‡»/é˜¶æ®µï¼‰
â”‚   â”œâ”€â”€ useDynamicBGM.ts           # ç¨‹åºåŒ– BGM ç”Ÿæˆ
â”‚   â”œâ”€â”€ useResourcePack.ts         # èµ„æºåŒ…åŠ è½½ä¸ç®¡ç†
â”‚   â”œâ”€â”€ useHighlights.ts           # é«˜å…‰æ—¶åˆ»æ•è·
â”‚   â”œâ”€â”€ useHighlightRenderer.ts    # é«˜å…‰å¡ç‰‡ Canvas æ¸²æŸ“
â”‚   â”œâ”€â”€ useShareCapture.ts         # åˆ†äº«æˆªå›¾ç”Ÿæˆ
â”‚   â””â”€â”€ useLeaderboard.ts          # æ’è¡Œæ¦œ API äº¤äº’
â”œâ”€â”€ components/
â”‚   â””â”€â”€ CardFan.vue                # æ‰‡å½¢å¡ç‰‡è½®æ’­ç»„ä»¶
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ GameView.vue               # ä¸»æ¸¸æˆé¡µé¢
â”‚   â”œâ”€â”€ DebugView.vue              # å…±æŒ¯å³°æ£€æµ‹è°ƒè¯•
â”‚   â”œâ”€â”€ AudioAnalyzer.vue          # é¢‘è°±å¯è§†åŒ–å·¥å…·
â”‚   â””â”€â”€ MediaProcessor.vue         # ç´ æåŠ å·¥å·¥å…·
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ stages.ts                  # 5 é˜¶æ®µè§†è§‰é…ç½®
â”‚   â””â”€â”€ vowels.ts                  # å…ƒéŸ³åºåˆ— & å…±æŒ¯å³°å‚æ•°
â”œâ”€â”€ types/
â”‚   â””â”€â”€ game.ts                    # æ‰€æœ‰ TypeScript æ¥å£
â””â”€â”€ router/index.ts

public/
â”œâ”€â”€ models/vowel/                  # TF.js æ¨¡å‹æ–‡ä»¶
â”‚   â”œâ”€â”€ model.json                 # æ¨¡å‹æ¶æ„ (37KB)
â”‚   â””â”€â”€ group1-shard1of1.bin       # é‡åŒ–æƒé‡ (69KB)
â””â”€â”€ resources/                     # èµ„æºåŒ…
    â””â”€â”€ oiia/                      # é»˜è®¤èµ„æºåŒ…

worker/                            # æ’è¡Œæ¦œ Cloudflare Worker
```

## ç©æ³•

### å‘å£° â†’ è¯†åˆ« â†’ åé¦ˆ

```
éº¦å…‹é£ â†’ AudioContext â†’ 16kHz é‡é‡‡æ · â†’ CNN æ¨ç† â†’ å…ƒéŸ³åºåˆ—æ ¡éªŒ
                                                        â†“
               UI æ›´æ–° â† é˜¶æ®µè§†è§‰å‡çº§ â† è®¡åˆ†ç³»ç»Ÿ â† åŒ¹é…ç»“æœ
```

### è®¡åˆ†è§„åˆ™

| è§„åˆ™ | æ•°å€¼ |
|------|------|
| æ­£ç¡®å…ƒéŸ³ | +10 åˆ† |
| è¿å‡»å€ç‡ | æ¯ 10 è¿å‡» +10%ï¼Œæœ€é«˜ 3x |
| é€Ÿåº¦åŠ æˆ | é—´éš” <300ms é¢å¤– +5 |
| å®Œç¾å¾ªç¯ | å®Œæ•´ oiiaioiiiai é¢å¤– +50 |

### è§†è§‰é˜¶æ®µ

| é˜¶æ®µ | åˆ†æ•° | æ•ˆæœ |
|------|------|------|
| åˆé†’ | 0 | ç¼“æ…¢æ—‹è½¬ |
| èºåŠ¨ | 500 | åŠ é€Ÿ + ç²’å­ |
| ç‹‚çƒ­ | 2,000 | éœ“è™¹ + å±å¹•æŠ–åŠ¨ |
| è¶…åº¦ | 5,000 | æ®‹å½± + è¿·å¹»èƒŒæ™¯ |
| ç¥çŒ« | 10,000 | å…¨å±å½©è™¹æ¼©æ¶¡ |

## æ’è¡Œæ¦œåç«¯

æ’è¡Œæ¦œä½¿ç”¨ç‹¬ç«‹çš„ Cloudflare Worker éƒ¨ç½²ï¼Œè¯¦è§ [worker/README.md](worker/README.md)ã€‚

```bash
cd worker
npm install
npm run dev      # æœ¬åœ°å¼€å‘ â†’ http://localhost:8787
npm run deploy   # éƒ¨ç½²åˆ° Cloudflare
```

## å¼€å‘è¯´æ˜

### è·¯ç”±

| è·¯å¾„ | è¯´æ˜ |
|------|------|
| `/game` | ä¸»æ¸¸æˆï¼ˆé»˜è®¤ï¼‰ |
| `/debug` | å…±æŒ¯å³°æ£€æµ‹å™¨è°ƒè¯• |
| `/analyzer` | éŸ³é¢‘é¢‘è°±åˆ†æ |
| `/media-processor` | ç´ æåŠ å·¥å·¥å…· |

### èµ„æºåŒ…

èµ„æºåŒ…å­˜æ”¾äº `public/resources/`ï¼Œæ¯ä¸ªåŒ…å« `manifest.json` å®šä¹‰å¸§åŠ¨ç”»ã€éŸ³èŠ‚ã€é˜¶æ®µæ–‡æ¡ˆç­‰ã€‚é€šè¿‡ `index.json` æ³¨å†Œå¯ç”¨èµ„æºåŒ…ã€‚

### ML æ¨¡å‹

å½“å‰æ¨¡å‹åŸºäº TIMIT æ•°æ®é›†è®­ç»ƒï¼ˆ92% éªŒè¯å‡†ç¡®ç‡ï¼‰ï¼Œå¯¹å­¤ç«‹å…ƒéŸ³åœºæ™¯æœ‰å¾…ä¼˜åŒ–ã€‚è®¡åˆ’è¿ç§»è‡³ Hillenbrand å­¤ç«‹å…ƒéŸ³æ•°æ®é›†é‡æ–°è®­ç»ƒã€‚è®­ç»ƒç¬”è®°æœ¬ä½äº [model/](model/) ç›®å½•ã€‚

## License

MIT